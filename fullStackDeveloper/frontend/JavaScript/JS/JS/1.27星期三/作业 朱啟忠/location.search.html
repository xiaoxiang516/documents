<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<pre>
        加分题目：
                编写一个带return的function,将字符串str中?后面的"键值对"转化成obj对象,并return出来！
        </pre>
	 
		<div class="" id="result"></div>

		<script type="text/javascript">
			var str =
				'?q=%E6%AF%9B%E9%92%88%E7%BB%87%E8%A1%AB&refpid=430274_1006&source=tbsy&style=grid&tab=all&pvid=5a409b0c6e66d0359b527a85224dfd7c&clk1=ad2693f8e1bda7b794fb06ef34484470&spm=a21bo.50862.201856-sline.22.SnU3TL';
			// 结果示例
			obj = {
				q: '%E6%AF%9B%E9%92%88%E7%BB%87%E8%A1%AB',
				refpid: '430274_1006',
				source: 'tbsy',
				// ......
			}

			function fun(str) {
				var index = str.indexOf("?");
				var obj = {};
				if (index == -1) {
					//找不到?,可以返回空对象
					return obj;
				} else {
					//找到了
					// 截取字符串
					//1-slice(位置,位置)---可以为负数
					//2-substr(index,length)
					//3-substring(下标,下标)
					var newstr = str.substr(index + 1);//从index+1开始截取作为结果
					// newstr=str.substring(index+1);
					var params = newstr.split("&"); //分割字符串得到数组
					// console.log(params);
					/* stringObject.split(separator,howmany) */
					
					// 循环数组的两种方式
					// far(var i=0;i<params.length;i++)
					// ["sex","age=12","name"]
					params.forEach(function(item, index, array) {
						index = item.indexOf("=");
						if(index==-1){
							//找不到
							obj[item]="";
						}
						else{
							var params_vs=item.split("=");
							// ["age","12"]
							obj[params_vs[0]]=params_vs[1];
						}
					})
					return obj;
				}

			}
			
			console.log(fun(str));
		</script>
	</body>

</html>
