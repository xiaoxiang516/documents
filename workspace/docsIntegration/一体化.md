## 增删查改

列表FAQ
分页，多个tab,筛选重置

新增，编辑
多余字段不要，数据格式重构


## 上传


```typescript
getSchema()
// fyshHead.properties = fyshHead
fyshHead.properties = mergeDomainsInSchema(fyshHead, pageObj.domainList, [
    { domain: 'FyfxlbNum', property: 'FyfxlbNum' },
    { domain: 'Eyqx', property: 'Eyqx' },
    { domain: 'YesNo', property: 'Sfczwx' },
    { domain: 'YesNo', property: 'IsTransfer' },
    { domain: 'YesNo', property: 'Sfyszjbg' }
  ])
```



JS过滤对象中不需要的属性
JSON复制为Object
```ts
const arr = cloneDeep(tableDataOne)
  arr.forEach(item => {
    if (Array.isArray(item.AttachFileSet)) {
      item.AttachFileSet = item.AttachFileSet.map(prop => {
        const obj = {}
        Object.keys(prop).forEach(i => {
          if (!['uid', 'status'].includes(i)) {
            obj[i] = prop[i]
          }
        })
        return obj
      })
      console.log('arr---item.AttachFileSet', item.AttachFileSet)
    }
  })
  console.log('停缓-现场盘点，数据结构tableDataOne', arr)

// 上传
item.AttachFileSet.forEach(prop => {
  delete prop.status
  delete prop.uid
})


```


## 表格校验
```js
const validateData = async () => {
  const result = await resultConfirmFormRef.value.validateForm()
  if (!result) return
  // 表格校验
  const list = Object.keys(tableObj.itemInfoRules)
  for (const item of tableObj.tableData) {
    for (const key of list) {
      if (item[key] === null || item[key] === '' || item[key] === undefined) {
        ElMessage({
          message: `成果确认表-【${tableObj.itemInfoRules[key][0].message}】为必填项`,
          type: 'error'
        })
        return
      }
    }
  }
  return true
}

const submit= async (Operation: string) => {
  const result = await validateData() //async validateData 函数拿到返回值必须要有await，否则只能拿到一个promise
  if (!result) return 

// Promise {<pending>}
// [[Prototype]]: Promise
// [[PromiseState]]: "fulfilled"
// [[PromiseResult]]: false
```


```ts
interface  Itese {
  /**
   * @param {string} key 唯一值
   */
  key: string
  /**
   * @param {string} label 名称
   */
  label: string
}

const Fn = {
  /**
   * 表格操作栏按钮数据
   * @returns Array<{ key: string; label: string }>
   */
  getRowButton: (): Array<Itese> => [
    {
      key: 'del',
      label: '删除'
    }
  ]
}
Fn.getRowButton().forEach(e => e.key)

```