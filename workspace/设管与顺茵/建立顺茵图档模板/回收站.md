<template>
	<div class="body-box">
		<div class="bread-box">
			<div class="bread-left-box">
				<el-breadcrumb separator-class="el-icon-arrow-right">
					<el-breadcrumb-item title="首页">
						<a href="/"><i class="el-icon-location mr-4"></i>首页</a>
					</el-breadcrumb-item>
					<el-breadcrumb-item :title="activeMenuName">{{ activeMenuName }}</el-breadcrumb-item>
				</el-breadcrumb>
			</div>
		</div>
		<el-card>
			<div slot="header">
				<b class="box-title">{{ activeMenuName }}</b>
			</div>
			<div class="">保留15天删除文件</div>
			<div class="mt-20">
				<el-table :data="tableData">
					<el-table-column type="selection" width="50"></el-table-column>
					<el-table-column label="名称"></el-table-column>
					<el-table-column label="原位置" prop=""></el-table-column>
					<el-table-column label="修改时间（修改人）" prop="">
						<template slot-scope="scope">
							{{ scope.row }}
						</template>
					</el-table-column>
					<el-table-column label="大小" prop=""></el-table-column>
				</el-table>
			</div>
			<div class="mt-20">
				<sapi-pagination :props="paginationOpt" @should-fetch-data="handleShouldFetchData"></sapi-pagination>
			</div>
		</el-card>
	</div>
</template>

<script>
	import commonFilterContainer from '@/pages/pdm/components/common-filter-container.vue'
	import paginationDef from '@/pages/pdm/static/js/defs/pagination.def.js'

	export default {
		components: {
			commonFilterContainer,
		},
		data() {
			const {
				pageIndex,
				pageSize,
				pageTotal,
				pageArr,
				layout
			} = paginationDef()
			return {
				activeMenuName: null,
				tableData: [],
				params: {
					pageIndex,
					pageSize,

				},
				// 分页控制
				paginationOpt: {
					pageIndex,
					pageSize,
					pageTotal,
					pageArr,
					layout
				},
			}
		},
		created() {
			this.$init()
			// this.activeMenuName = sessionStorage['activeMenuName']
			this.activeMenuName = "回收站"
		},
		computed: {

		},
		methods: {
			// 获取项目列表数据
			getTableData() {
				this.params.pageIndex = this.paginationOpt.pageIndex
				this.params.pageSize = this.paginationOpt.pageSize
				this.$get('/api/pdm/pMPartnerProjects', this.params, res => {
					this.tableData = res.Rows
					this.paginationOpt.pageTotal = res.Total
				})
			},
			// 分页变化
			handleShouldFetchData({
				pageIndex,
				pageSize
			}) {
				this.paginationOpt.pageIndex = pageIndex
				this.paginationOpt.pageSize = pageSize
				this.getTableData()
			},
		},

	}
</script>

<style lang="less">


</style>
